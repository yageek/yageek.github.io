---

title: "Compile OpenCV 2.4.1 on Mac Os X Lion"
date: 2012-06-20
comments: true
categories:
 - mac os x
 - cmake
 - opencv
 - lion
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><br /><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 18px; text-align: -webkit-auto;">After looking an episode of TBBT concerning a OCR iPhone app, I was considering to develop a real one or at least a prototype. From my old memories, I thought directly to the OpenCV library and I was glad to see that an android port was in high development stage. By the way, before trying to work on an Android OCR app, I wanted to start softly with a basic program on my Mac. On the main website I saw the simple way to get it worked was using fink, macports or homebrew :( Those tools are very good but I wanted a fresh compilation. I simply download the last stable version which uses the CMake system to compile all the framework. Really simple, but I experienced some linking errors that are due to, I suppose, to the fact that I don't have ffmpeg installed on my system. It seemed to miss a MP3 lame library and a faac library.&nbsp;</div><div style="line-height: 18px; text-align: -webkit-auto;"><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; font-size: 13px;">Fisrt start by downloading and compile the lame library (3.99.5 worked fine) from&nbsp;<a data-mce-href="http://lame.sourceforge.net/" href="http://lame.sourceforge.net/" style="color: #007bff;" target="_blank">http://lame.sourceforge.net/</a>:</div><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; font-size: 13px;"><br /></div><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">tar xzvf lame-3.99.5.tar.gz</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">cd lame-3.99.5</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">./configure</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">make</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">sudo make install</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;"><br /></span><br /></div><div style="line-height: 18px; text-align: -webkit-auto;"><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; font-size: 13px;">Same thing with the faac library (1.28 worked fine) at&nbsp;<a data-mce-href="http://www.audiocoding.com/downloads.html" href="http://www.audiocoding.com/downloads.html" style="color: #007bff;" target="_self">http://www.audiocoding.com/downloads.html</a>:</div><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; font-size: 13px;"><br /></div><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">tar xjvf faac-1.28.tar.bz2</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">cd faac-1.28</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">./configure</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">make</span><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">sudo make install</span><br /><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; font-size: 13px;"><br /></div></div><div style="font-size: 13px; line-height: 18px; text-align: -webkit-auto;"><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif;">The error came from the highgui module. To fixed it, I edited the modules/highgui/CMakeLists.txt to link to the previous compiled library. &nbsp;You can use&nbsp;<a data-mce-href="https://docs.google.com/open?id=0B6tbPeG2hrjQZXhlLUxxUXhLNEU" href="https://docs.google.com/open?id=0B6tbPeG2hrjQZXhlLUxxUXhLNEU" style="color: #007bff;" target="_blank">this patch</a>&nbsp;file (patch -p0 &lt; opencv_lion.patch) or edit the modules/highgui/CMakeLists.txt to add those lines :</div><br /><div style="font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif;"><br /></div><span style="font-family: 'Courier New', Courier, monospace;">if(APPLE)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">&nbsp;list(APPEND HIGHGUI_LIBRARIES ${BZIP2_LIBRARIES} -lmp3lame &nbsp;-lbz2 -lfaac)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">endif(APPLE)</span><br /></div></div></div>
